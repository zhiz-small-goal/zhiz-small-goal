---
title: 对象定义
date: 2025.12.02
tags: [cpp, practice]
---

# 对象定义

## 代码说明

（这里写这段代码要解决什么问题、关键点是什么）

## 学习笔记

（记录遇到的坑、思路变化、调试过程和总结）

### 1 对象
- 对象是某个**对象类型**的一块内存区域（排除函数类型、void类型、引用类型等）
- 对象具有大小、对齐、存储期、生命周期和值等属性。

### 2 存储期
- 存储期
    - 针对内存的概念，对象的一个属性，定义”包含该对象的那块内存“的最小潜在生命周期。
    - 由对象的创建方式决定。
    - 存储期描述的是**这块内存从分配到释放的那段时间**，生命周期要么等于这个时间段，要么被包含在内。

- 存储期分为
    - 静态存储期
        - **存储周期**从程序启动前开始，到程序结束时结束。
        - 全局变量
        - 命名空间作用域
        - static 关键字命名的变量，**函数内static关键字、命名空间作用域中的static都是静态存储期。**

    - 线程存储期
        - 使用 thread_local 关键字命名，**存储周期**从线程的分配到停止。
        - 所有**thread_local**对象在每个线程都有自己的一份，**在该线程开始时【构造？】，在该线程结束时【析构？】。**
        - 猜测线程存储期停止有2种方法：
            - 1，定义线程的时候设定终止条件
            - 2，使用代码控制终止

    - 自动存储期
        - 存储期从**执行流进入【声明？】所在的块到【声明语句？】**开始，到**执行离开这个块**结束（包括正常离开/return/异常）。
        - 大概取决于源代码中的{}范围
        - 分配「栈」（典型实现回放在调用栈上，但标准只说”自动存储期“，不强制用栈）

    - 动态存储期
        - 分配 「堆」
        - 存储期由porator new定义分配，用porator delete释放结束。
        - 对象的生命周期可以在一次动态存储内多次开始/结束（placement new + 显示析构）


### 3 存储期、生命周期和作用域的区别

- 存储期：对象的一个属性，定义“该对象所在那块内存”的最小潜在生命周期。
存储期针对的是内存的分配和释放的描述。
    - 对某一次「对象使用存储」的过程，我们从「给这个对象准备内存」到「最终释放这块内存」，
    这段时间就叫这个对象的存储期。
    - 存储期描述的是这次为对象分配的那块内存**从“分配”到“释放”的时间段**，即使生命周期提前结束，那块存储还可能作为 **【原始存储？】**而存在。。

- 生命周期：T对象在内存中的存在时间。
    - 生命周期从时间上被包含于存储期
    - 读取生命周期之外的某类型对象是未定义行为
    - 生命周期一旦结束，按照原来的名字/ref/ptr按 **【T类型？】**访问它是未定义行为。

- 作用域：编译期的概念，表示名字在源代码中的可见范围。常用{}表示，但不限于{}。
    - 常见的块作用域有{}引入和结束，但还有**函数形参作用域、类作用域**等，都是语法规则上定义的。
